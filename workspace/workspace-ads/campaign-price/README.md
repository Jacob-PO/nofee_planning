# Campaign Price Generator

**토스 스타일 캠페인 가격표 자동 생성 도구**

DB에서 진행 중인 캠페인 데이터를 가져와 토스 스타일의 1000x1000 가격표 광고를 자동으로 생성합니다.

---

## 주요 기능

- 📊 DB에서 실시간 캠페인 데이터 수집
- 🎨 토스 스타일 디자인 (1000x1000 정사각형)
- 📱 기기별 최저가 정렬 (아이폰 → 갤럭시 순)
- 🏷️ 통신사, 가입유형, 지역 태그 표시
- 🔄 자동 가격 업데이트

---

## 파일 구조

```
campaign-price/
├── generate.py                      # 메인 스크립트
├── output/                          # 생성된 HTML 파일
│   └── campaign_price_toss.html    # 최신 가격표
└── README.md                        # 이 문서
```

---

## 사용 방법

### 1. 가격표 생성

```bash
cd workspace-ads/campaign-price
python3 generate.py
```

### 2. 결과 확인

```bash
open output/campaign_price_toss.html
```

생성된 HTML 파일을 브라우저에서 열어 확인할 수 있습니다.

---

## 데이터 소스

- **데이터베이스**: `db_nofee.tb_campaign_phone`
- **필터 조건**:
  - 삭제되지 않은 캠페인 (`deleted_yn = 'N'`)
  - 제품 코드가 있는 캠페인
  - 할부원금이 1,000만원 미만
  - 사전예약 제외
  - 미리보상 제외
  - 오늘 날짜 기준 진행 중인 캠페인

---

## 출력 형식

### 가격표 레이아웃

- **헤더**: 년월 + 날짜
- **콘텐츠**: 3단 그리드
  - 기기명
  - 통신사 태그 (SKT/KT/LG)
  - 가입유형 태그 (신규/번호이동/기기변경)
  - 가격 (만원 단위)
  - 지역 정보
- **푸터**: NOFEE 브랜드 + 검색 안내

### 디자인 특징

- **배경**: 보라색 그라데이션 (토스 스타일)
- **폰트**: SUIT Variable
- **크기**: 1000x1000px
- **카드**: 흰색 배경 + 둥근 모서리

---

## 기기 우선순위

1. **아이폰 시리즈** (최신순)
   - 아이폰 17 프로 맥스
   - 아이폰 17 프로
   - 아이폰 17
   - 아이폰 16 시리즈...

2. **갤럭시 시리즈** (최신순)
   - 갤럭시 S25 울트라
   - 갤럭시 S25
   - 갤럭시 Z 폴드/플립...

3. **기타 기기**

---

## 통신사별 색상

- **SKT**: #EA002C (빨강)
- **KT**: #0089D0 (파랑)
- **LG**: #E6007E (핑크)

---

## 수정 가이드

### 기기 리스트 변경

`generate_toss_style_html()` 함수에서 기기 우선순위를 조정할 수 있습니다.

### 디자인 수정

HTML 내 `<style>` 태그에서 CSS를 수정하세요:
- 색상
- 폰트 크기
- 레이아웃
- 카드 스타일

### 필터 조건 수정

`get_campaign_data()` 함수의 SQL 쿼리를 수정하세요.

---

## 문제 해결

### DB 연결 실패

```python
self.db_config = {
    'host': '43.203.125.223',
    'port': 3306,
    'user': 'nofee',
    'password': 'HBDyNLZBXZ41TkeZ',
    'database': 'db_nofee',
    'charset': 'utf8mb4'
}
```

DB 연결 정보를 확인하세요.

### 의존성 오류

```bash
pip install pandas pymysql
```

---

## 업데이트 내역

- **2025-10-16**: 실제 DB 지역 정보 사용으로 변경
- **2025-10-14**: 토스 스타일 디자인 적용
- **2025-10-08**: 초기 버전 생성

---

## 관련 링크

- [workspace-ads README](../README.md)
- [NOFEE 웹사이트](https://nofee.team)
